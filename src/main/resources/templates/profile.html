<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Profile Screen</title>
    <link rel="icon" href="https://i.postimg.cc/zGBDRhXy/2024-02-25-113236.png" type="image/png">
    <style>
        body{
            width: 100%;
            margin: 0px;
            font-family: 'Segoe UI';
        }
        main{
            display: grid;
            grid-template-columns: 20% 80%;
        }
        .logo{
            position: absolute;
            left: 15%;
            font-size: 30px;
        }
        .logo:hover{
            opacity: 0.7;
        }
        .main-left{
            border: 1px solid lightgray;
            max-height: 1050px;
            min-height: 750px;
        }
        .main-left-div{
            margin-top: 50px;
            display: grid;
            padding: 0px 10%;
            row-gap: 2em;

        }
        .main-left-div div{
            display: grid;
            grid-template-columns: 20% 80%;
        }
        .main-left img{
            width: 30px;
            opacity: 0.3;
        }
        .main-left a{
            text-decoration: none;
            color: darkslategray;
            top: 5px;
            position: relative;
        }
        .main-left h1{
            position: relative;
            left: 10%;
            color: #092035;
        }
        .main-right{
            height: 940px;
        }
        .main-right-header{
            display: grid;
            grid-template-columns: 70% 30%;
            border-top: 1px solid lightgray;
            border-right: 1px solid lightgray;
        }
        .main-right-header img{
            width: 30px;
            height: 30px;
            margin: auto;
        }
        .main-right-info{
            display: grid;
            grid-template-columns: 15% 15% 40%;
        }
        .main-right-info h4{
            text-align: center;
        }
        .main-right-logo h1{
            color: darkslategray;
            position: relative;
            left: 20px;
        }
        .background{
            width: 100%;
            height: 200px;
            background-image: url('https://static.vecteezy.com/system/resources/previews/003/452/115/non_2x/wildlife-elk-in-forest-nature-landscape-illustration-free-vector.jpg');
            background-position: center;
            background-size: cover;
        }

        form{
            display: grid;
            grid-template-columns: 35% 65%;
            gap: 3em;
            position: absolute;
            width: 70%;
            margin-top: -100px;
            margin-left: 50px;
            z-index: 1000;
        }
        .m-1{
            border: 1px solid lightgray;
            height: 310px;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
        }
        .m-2{
            border: 1px solid lightgray;
            min-height: 500px;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
        }
        #main2{
            display: none;
        }

        .main-2{
            border: 1px solid lightgray;
            height: 50px;
            padding-top: 13px;
            padding-bottom: 14px;
            width: 100%;
            display: grid;
            grid-template-columns: 35% 20% 25% 15%;
        }
        .main-2 button{
            background-color: white;
            border: 0px ;
            height: 50px;
            color: darkslategray;
            cursor: pointer;
            font-size: 18px;
            font-weight: 600;
        }

        .main-2 button:hover{
            opacity: 0.7;
            transition: 0.3s;
        }

        .file {
            position: relative;
        }
        label{
            font-family: Arial;
            color: #999;
        }
        .input {
            display: none;
        }

        .button {
            width: 50px;
            position: absolute;
            margin-top: -105px;
            margin-left: 220px;
            z-index: 500;
        }

        .icon {
            width: 50px;
            cursor: pointer;
            border-radius: 50px;
        }

        .profile-photo{
            width: 200px;
            margin: 50px auto;
            box-shadow: 0px 2px 10px lightgray;
            border-radius: 50%;
            border: 1px solid whitesmoke;
            height: 200px
        }
        .profile-photo img{
            width: 200px;
            border-radius: 50%;
            margin: auto;
            height: 200px;
        }



        .content{
            display: grid;
            grid-template-columns: 50% 50%;
            justify-items: center;
            row-gap: 1em;
            margin-top: 40px;
        }
        .content-div{
            display: grid;
            position: relative;
            top: -50px;
        }
        .content-div h3{
            opacity: 0.8;
            width: 100%;
            position: relative;
            padding-left: 42%;
        }
        .content-div label{
            font-size: 18px;
            position: relative;
            left: 37%;
        }
        .content label{
            font-size: 18px;

        }
        .content-div input{
            font-size: 17px;
            position: relative;
            left: 37%;
            padding: 10px;
            margin-top: 0px;
            border: 1px solid lightgray;
            border-radius: 5px;
            width: 250px;
        }
        .content input{
            font-size: 17px;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid lightgray;
            border-radius: 5px;
            width: 250px;
        }
        .content-div button{
            background-color: #335da5;
            color: white;
            padding: 10px 30px;
            font-size: 17px;
            border-radius: 10px;
            border: 0px solid ;
            position: relative;
            left: 37%;
            top: 0px;
            box-shadow: 0px 5px 5px lightgray;
        }
        .content button{
            background-color: #335da5;
            color: white;
            padding: 10px 30px;
            font-size: 17px;
            border-radius: 10px;
            border: 0px solid ;
            position: relative;
            margin-left: -115px;
            top: 20px;
            box-shadow: 0px 5px 5px lightgray;
        }
        #user-image{
            border-radius: 50px;
        }
        .content button:hover{
            opacity: 0.7;
            transition: 0.3s;
        }
        .content-div button:hover{
            opacity: 0.7;
            transition: 0.3s;
        }
        #default-image{
            width: 70%;
            height: 70%;
            margin: 15%;
            border-radius: 0px;
        }
        #userimage{
            border-radius: 50px;
        }
        .admin-panel{
            background-color: white;
            border: 0px;
            padding: 0px;
            width: 90px;
            margin-top: -10px;
            font-size: 15px;
            cursor: pointer;
        }
        .admin-page{
            opacity: 1000;
            background-color: white;
            width: 70%;
            margin-left: 5%;
            padding: 20px;
            position: absolute;
            top: 150px;
            border-radius: 10px;
            border: 1px solid lightgray;
            padding-bottom: 50px;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            border: 0px solid lightgray;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0px 2px 5px lightgray;
        }
        .btn-danger{
            background-color: crimson;
            color: white;
            padding: 5px 20px;
            border: 0px;
            border-radius: 5px;
        }
        .btn-warning{
            background-color: orange;
            color: white;
            padding: 5px 20px;
            border: 0px;
            border-radius: 5px;
        }
        .container-btns{
            display: grid;
            position: absolute;
            width: 80%;
            left: 12%;
            top: 0px;
            grid-template-columns: 50% 50%;
        }
        .container-btns button{
            border: 0px solid ;
            padding-top: 20px;
            font-size: 18px;
            color: darkslategray;
            cursor: pointer;
            padding-bottom: 20px;
            font-weight: 600;
            background-color: white;
        }
        .container2{
            display: none;
        }
        hr{
            border: 1px solid lightgray;
            position: absolute;
            width: 100%;
            left: 0px;
            margin-top: -30px;
        }
        .admin-page{
            display: none;
        }
        .container-btns button:hover{
            opacity: 0.7;
        }
        .btn:hover{
            opacity: 0.7;
            transition: 0.3s;
        }
        .table thead {
            background-color: #5dcae3;
            color: #fff;
        }

        .table th, .table td {
            padding: 10px;
            text-align: center;
        }

        .table tbody tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .table tbody tr:hover {
            background-color: #ebebeb;
        }

        .table tbody td:last-child {
            text-align: center;
        }
        #close{
            background-color: crimson;
            color: white;
            border: 1px solid ;
            border-radius: 10px;
            padding: 5px 20px;
            font-size: 17px;
            margin-bottom: 50px;
        }

        .container-h3{
            margin-left: 20px;
            font-weight: 450px;
            color: darkslategray;
            margin-top: -10px;

        }
        #close:hover{
            opacity: 0.8;
            transition: 0.3s;
        }

        #content3{
            height: 250px;
            display: grid;
            grid-template-columns: 50% 50%;
            justify-items: center;
            row-gap: 1em;
            position: absolute;
            width: 80%;
            top: 80px;
            left: 120px;
        }
        #content4{
            display: grid;
        }
        .cont-div{
            display: grid;
            grid-template-columns: 50% 50%;
            justify-items: center;
            width: 50%;
        }
        .cont-div input{
            width: 100px;
        }

        .signout-btn{
            border-top: 1px solid #999;
            padding-top: 20px;
            position: relative;
            top: 550px;
        }
        #main3{
            display: none;
            background-color: white;
            width: 73%;
            border-radius: 10px;
            margin-left: 50px;
            top: 110px;
            min-height: 620px;
            z-index: 500;
            overflow: hidden;
            position: absolute;
            border: 1px solid lightgray;
        }
        select{
            font-size: 17px;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid lightgray;
            border-radius: 5px;
            color: #999;
            width: 272px;
        }
        textarea{
            font-size: 17px;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid lightgray;
            border-radius: 5px;
            color: #999;
            min-width: 250px;
            max-width: 250px;
            min-height: 60px;
            max-height: 60px;

        }
        #main4{
            display: none;
            background-color: white;
            width: 73%;
            border-radius: 10px;
            margin-left: 50px;
            margin-top: -50px;
            min-height: 450px;
            z-index: 500;
            overflow: hidden;
            position: absolute;
            border: 1px solid lightgray;
        }
        #main5{
            display: none;
            background-color: white;
            width: 73%;
            border-radius: 10px;
            margin-left: 50px;
            margin-top: -50px;
            min-height: 450px;
            z-index: 500;
            overflow: hidden;
            position: absolute;
            border: 1px solid lightgray;
        }
        #main2{
            display: grid;
        }
        #main3 .content{
            height: 400px;
            margin-top: -20px;
        }

        #image-container{
            width: 100%;
            overflow: hidden;
            height: 100%;
            top: 0px;
        }
        #default-image{
            width: 200px;
            height: 200px;
            position: relative;
            margin-left: 0px;
            margin-top: 0px;
            border-radius: 50%;
        }




        #bookings{
            display: none;
        }
        .container-btns-2{
            display: grid;
            grid-template-columns: 50% 50%;
            width: 80%;
            margin-left: 12%;
            margin-top: -80px;
            position: absolute;
        }
        #announcements{
            display: none;
        }
        .container-btns-2 button{
            background-color: white;
            border: 0px;
            font-size: 20px;
            color: darkslategray;
        }
        .bookings-cards{
            width: 80%;
            margin: auto;
            position: relative;
            top: -50px;
            background-color: white;
            padding: 20px 50px;
            border-radius: 10px;
            border: 1px solid #ddd;
        }
        .booking-card{
            display: grid;
            grid-template-columns: 15% 70%;
            gap: 1em;
        }
        .booking-card img{
            width: 80%;
            height: 100px;
        }

        .booking-card-info{
            margin-top: 0px;
        }
        .booking-card-info h1{
            font-size: 18px;
        }
        .booking-card-info p{
            font-size: 15px;
            color: red;
            margin-top: -10px;
            margin-bottom: -10px;
        }
        .modal-content{
            width: 100%;
            background-color: rgb(0,0,0,0.5);
            height: 130%;
            position: absolute;
            top: 0px;
        }
        .md{
            width: 50%;
            padding: 50px;
            background-color: white;
            position: absolute;
            z-index: 1;
            top: 5%;
            left: 20%;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0px 0px 10px black;
        }
        .md .back-modal-img{
            width: 100%;
            height: 250px;
            background-image: url('https://i.pinimg.com/originals/f9/62/90/f9629031c069ce8ae4fa44950e5370ec.jpg');
            position: absolute;
            margin-top: -50px;
            margin-left: -50px;
            background-position: center;
            z-index: 0;
        }
        .md .close{
            background-color: crimson;
            padding: 2px 10px;
            font-weight: bold;
            font-size: 30px;
            border-radius: 10px;
            color: white;
            box-shadow: 0px 0px 5px darkslategray;
            position: absolute;
            margin-left: 97%;
            margin-top: -30px;
        }
        .md .back-modal-img img{
            width: 100%;
            margin-top: 100px;

        }
        .md .detail-card{
            z-index: 1;
            position: relative;
        }
        .md .detail-card h2{
            color: white;
            font-size: 30px;
        }
        .md .left-section{
            color: whitesmoke;
        }

        .md #rejectButton{
            background-color: crimson;
            padding: 5px 10px;
            color: white;
            border: 0px ;
            font-size: 17px;
            border-radius: 5px;
            box-shadow: 0px 2px 5px darkslategray;
        }
        .md #comment{
            width: 500px;
            max-height: 80px;
            margin-top: 20px;
            min-height: 80px;
            margin-bottom: 20px;
            border: 0px;
            box-shadow: 0px 2px 5px darkslategray;
            border-radius: 5px;
            padding: 15px;
        }
        .md .right-section p, h3{
            display: grid;
            grid-template-columns: 30% 70%;
        }
        .md .right-section{
            padding-top: 50px;
        }
        .md .right-section h3,p span{
            opacity: 0.7;
        }
        .md .other-photos{
            display: grid;
            width: 70%;
            grid-template-columns: repeat(4,1fr);
            height: 100px;
            gap: 1em;
            margin-bottom: 10px;
        }
        .md .other-photos img{
            width: 100%;
            height: 100px;
            border-radius: 5px;
        }
        .md #acceptButton{
            background-color: seagreen;
            padding: 5px 10px;
            color: white;
            border: 0px ;
            font-size: 17px;
            border-radius: 5px;
            box-shadow: 0px 2px 5px darkslategray;
        }
        .btn-close-booking{
            background-color: crimson;
            border: 0px;

            padding: 5px 20px;
            font-size: 18px;
            border-radius: 5px;
            color: white;
            box-shadow: 0px 2px 5px #ddd;
            position: absolute;
            margin-bottom: 0px;
            margin-left: 81%;
            margin-top: 10px;
        }
        #content12{
            height: 900px;
            position: relative;
            top: -40px;
        }
        #content1111{
            text-align: center;
            padding-bottom: 50px;
            border-top: 1px solid #e4e4e4;
        }
        .text-pass{
            background-color: #dcf0e1;
            padding: 15px 30px;
            width: 250px;
            color: #6e9680;
            margin-left: 35px;
            border-radius: 5px;
        }
        .change-text{
            margin-left: -100px;
            color: darkslategray;
            font-size: 20px;
        }
        .submitCreditCardDD{

        }
        #channels {
            display: none;
        }
        /* Table Styles */
        #channelsTable {
            width: 100%;
            border-collapse: collapse;
        }

        #channelsTable th, #channelsTable td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        #channelsTable th {
            background-color: #f2f2f2;
        }

        #channelsTable tbody tr:hover {
            background-color: #f9f9f9;
            cursor: pointer;
        }
    </style>
</head>
<body data-user-id="${userId}">
<main>
    <input type="hidden" name="userIdshka" th:value="${#authentication.principal.id}">
    <section class="main-left">
        <h1>AlmaTour</h1>
        <div class="main-left-div">
            <div>
                <img src="https://cdn1.iconfinder.com/data/icons/finance-banking-tiny-icons/16/seal_of_approval-1024.png">
                <button class="admin-panel" onclick="changePage2()">
                    <a>My Bookings</a>
                </button>
            </div>

            <div>
                <img src="https://cdn3.iconfinder.com/data/icons/unicons-vector-icons-pack/32/messages-1024.png">
                <a th:href="@{'/myMessages/'+${#authentication.principal.id}}">Messages</a>
            </div>
            <div sec:authorize="hasAnyRole('ROLE_ADMIN')">
                <img src="https://icon-library.com/images/control-system-icon/control-system-icon-0.jpg">
                <button class="admin-panel" onclick="changePage()">
                    <a>Admin Panel</a>
                </button>
            </div>
            <div>
                <img src="https://icon-library.com/images/control-system-icon/control-system-icon-0.jpg">
                <button class="admin-panel" onclick="changePage3()">
                    <a>Channels</a>
                </button>
            </div>
            <div class="signout-btn">
                <img src="https://c3.klipartz.com/pngpicture/421/12/sticker-png-sword-art-online-vector-icons-logout-thumbnail.png">
                <a th:href="@{'/exit'}">Sign Out</a>
            </div>
        </div>
    </section>
    <section class="main-right">
        <div class="main-right-header">
            <div class="main-right-logo">
                <h1>Profile</h1>
            </div>
            <div class="main-right-info">
                <img src="https://cdn0.iconfinder.com/data/icons/payment-76/512/notification-1024.png">
                <img th:src="@{'/images/'+${#authentication.principal.avatarUrl}}" id="userimage">
                <h4 th:text="${#authentication.principal.fullName}"></h4>
            </div>
        </div>
        <div>
            <div>
                <img class="background">
            </div>
            <input type="hidden" th:value="${#authentication.principal.id}" name="currentUserId">
            <div class="admin-page" id="adminpage">
                <button id="close" onclick="closePage()">Close</button>
                <div class="container-btns">
                    <button onclick="changePanel()">User Panel</button>
                    <button onclick="changePanel2()">Accommodation Panel</button>
                </div>
                <hr>
                <div class="container" id="container">
                    <h3 class="container-h3">User Adminstration Panel:</h3>
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th>USER ID</th>
                            <th>FULL NAME</th>
                            <th>EMAIL</th>
                            <th>IS BLOCKED</th>
                            <th>ACTION</th>
                        </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
                <div class="container2" id="container2">
                    <h3 class="container-h3">Accommodation Adminstration Panel:</h3>
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>NAME</th>
                            <th>LOCATION</th>
                            <th>CITY NAME</th>
                            <th>USER NAME</th>
                            <th>STATUS</th>
                            <th>ACTION</th>
                        </tr>
                        </thead>
                        <tbody id="accomodationTableBody">

                        </tbody>
                    </table>
                </div>
            </div>

            <div class="main-right-div" id="main2">
                <form th:action="@{'/upload-avatar'}" enctype="multipart/form-data" method="post" id="uploadForm">
                    <div class="m-1">
                        <div class="profile-photo">
                            <div id="image-container">
                                <img th:src="@{'/images/'+${#authentication.principal.avatarUrl}}" id="default-image">
                            </div>
                        </div>
                        <div class="file-input">
                            <input name="avatar" type="file" id="file" class="input" onchange="displayImage()"/>
                            <label for="file" class="button">
                                <img src="https://i.pinimg.com/originals/61/13/18/611318744eb4662cec330f9480d3740c.jpg"
                                     alt="Camera Icon" class="icon">
                            </label>
                        </div>
                    </div>

                    <div class="m-2">
                        <div class="main-2">
                            <button type="button" onclick="closeModal1()">Account Settings</button>
                            <button type="button" onclick="closeModal2()">Place an Add</button>
                            <button type="button" onclick="closeModal3()">Requisites</button>
                            <button type="button" onclick="closeModal4()">Wallet</button>
                        </div>
                        <div class="content" id="content1">
                            <div>
                                <label>Full Name:</label><br>
                                <input name="userFullName" type="text" th:value="${#authentication.principal.fullName}">
                            </div>
                            <div>
                                <label>E-mail address:</label><br>
                                <input disabled type="text" th:value="${#authentication.principal.email}">
                            </div>
                            <div>
                                <label>Phone number:</label><br>
                                <input name="userPhoneNumber" type="text" th:value="${#authentication.principal.phoneNumber}">
                            </div>
                            <div>
                                <label>City:</label><br>
                                <select name="userCity">
                                    <option th:each="city : ${cities}" th:value="${city.id}" th:text="${city.name}" th:selected="${#authentication.principal.city != null and city.id == #authentication.principal.city.id}"></option>
                                </select>
                            </div>
                            <div>
                                <button type="submit">Update</button>
                            </div>
                        </div>

<!--                        <div class="content" id="content1111">-->
<!--                            <div>-->
<!--                                <form th:action="@{'/savePasswordd'}" method="post">-->
<!--                                    <h4 class="change-text">Change password</h4>-->
<!--                                    <input name="user_old_password" placeholder="Current Password" type="text">-->
<!--                                    <h4 class="text-pass">Please create a new password that you don't use any other site!</h4>-->
<!--                                    <input name="user_new_password" type="text" placeholder="New Password" >-->
<!--                                    <input name="user_repeat_new_password" type="text" placeholder="Confirm Password">-->
<!--                                    <br>-->
<!--                                    <button type="submit">Submit</button>-->
<!--                                </form>-->
<!--                            </div>-->
<!--                        </div>-->
                    </div>
                </form>
            </div>
        </div>
        <div id="bookings">
            <div class="bookings-cards">

                <button id="close" onclick="closeBooking()">Close</button>
                <div class="container-btns-2">
                    <button onclick="changeBook1()">Bookings Panel</button>
                    <button onclick="changeBook2()">Announcements Panel</button>
                </div>
                <hr>
                <div id="bookingss">
                    <h1>My bookings:</h1>
                    <div id="bookingCardsContainerQ"></div>
                </div>

                <div id="announcements">
                    <h1>My announcements</h1>
                    <div id="bookingCardsContainer"><!-- Dynamic booking cards will be appended here --></div>
                </div>
            </div>
        </div>
        <div id="channels">
            <div class="bookings-cards">
                <button id="close" onclick="closeChannel()">Close</button>
                <hr>
                <div id="chane">
                    <h1>My channels:</h1>
                    <div id="channelsContainer">
                        <table id="channelsTable">
                            <thead>
                            <tr>
                                <th>Name</th>
                                <!-- Add more table headers if needed -->
                            </tr>
                            </thead>
                            <tbody id="channelsTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div id="main3">
            <div class="main-2">
                <button onclick="closeModal1()">Account Settings</button>
                <button onclick="closeModal2()">Place an Add</button>
                <button onclick="closeModal3()">Requisites</button>
                <button type="button" onclick="closeModal4()">Wallet</button>
            </div>
            <div class="content" id="content12">
                <div>
                    <label>Category:</label><br>
                    <select name="category">
                        <option th:each="category : ${categories}" th:value="${category.id}"
                                th:text="${category.name}"></option>
                    </select>
                </div>
                <div>
                    <label>Place name:</label><br>
                    <input type="text" name="placeName">
                </div>
                <div>
                    <label>Description:</label><br>
                    <textarea name="description"></textarea>
                </div>
                <div>
                    <label for="startTime">Start time:</label><br>
                    <input type="date" id="startTime" name="startTime">
                </div>
                <div>
                    <label for="endTime">End time:</label><br>
                    <input type="date" id="endTime" name="endTime">
                </div>
                <div>
                    <label>Price:</label><br>
                    <input type="text" name="price">
                </div>
                <div>
                    <label>Location:</label><br>
                    <input type="text" name="location">
                </div>
                <div>
                    <label>City:</label><br>
                    <select name="city">
                        <option th:each="city : ${cities}" th:value="${city.id}" th:text="${city.name}"></option>
                    </select>
                </div>
                <div>
                    <label>Photos:</label><br>
                    <input type="file" name="photos" multiple>
                </div>
                <div>
                    <button type="submit" id="addAccommodation">Submit</button>
                </div>
            </div>
        </div>

        <div id="main4">
            <div class="main-2">
                <button onclick="closeModal1()">Account Settings</button>
                <button onclick="closeModal2()">Place an add</button>
                <button onclick="closeModal3()">Requisites</button>
                <button type="button" onclick="closeModal4()">Wallet</button>
            </div>
            <div class="content" id="content3">
                <div>
                    <label>Full Name:</label><br>
                    <input type="text" name="fullName">
                </div>

                <div>
                    <label>Card number:</label><br>
                    <input type="text" name="cardNumber">
                </div>
                <div>
                    <label>CVV:</label><br>
                    <input type="text" name="cvv">
                </div>
                <div>
                    <label>Expiration date:</label><br>
                    <input type="text" name="expirationDate">
                </div>
                <div>
                    <button type="submit" id="submitCreditCard">Submit</button>
                </div>
            </div>
        </div>

        <div id="main5">
            <div class="main-2">
                <button onclick="closeModal1()">Account Settings</button>
                <button onclick="closeModal2()">Place an add</button>
                <button onclick="closeModal3()">Requisites</button>
                <button onclick="closeModal4()">Wallet</button>
            </div>
            <div class="content-div">
                <h3>Top up your balance:</h3>
                <div>
                    <label>Your ballance:</label><br>
                    <input type="text" name="balance">
                </div>

                <div>
                    <label>Replenish the amount:</label><br>
                    <input type="text" name="amount">
                </div>
                <div>
                    <button type="button" id="submitCreditCardDD">Submit</button>
                </div>
            </div>
        </div>
    </section>
</main>
<div id="editAccommodationModal" class="modal">
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    function editAccommodation(id) {
        // Fetch accommodation data by ID
        fetch(`/accommodations/${id}`)
            .then(response => response.json())
            .then(data => {
                // Display modal
                const modal = document.getElementById('editAccommodationModal');
                modal.innerHTML = createModalContent(data);

                // Display modal
                modal.style.display = 'block';
            })
            .catch(error => {
                console.error('Error fetching accommodation:', error);
            });
    }

    function createModalContent(data) {
        return `
        <div class="modal-content">
        <div class="md">
            <div class="back-modal-img">
                <img src="https://i.postimg.cc/q7gJMRxX/1714304512813.png">
            </div>

            <section class="detail-card">
            <span class="close" onclick="closeModal()">×</span>
            <h2>Edit Accommodation</h2>
                <div class="left-section">
                    <h1>Name: <span>${data.name}</span></h1>
                </div>
                <div class="right-section">
                    <p>Description: <span>${data.description}</span></p>
                    <p>Category: <span>${data.category != null ? data.category.name : 'Category Name'}</span></p>
                    <p>Start Time: <span>${data.startTime}</span></p>
                    <p>End Time: <span>${data.endTime}</span></p>
                    <p>Location: <span>${data.location}</span></p>
                    <p>City: <span>${data.city != null ? data.city.name : 'City Name'}</span></p>
                    <p>User: <span>${data.user != null ? data.user.fullName : 'User Name'}</span></p>
                    <p>Status: <span>${data.status}</span></p>
                    <h3>Price: <span>${data.price + ' KZT'}</span></h3>
                </div>
                <div class="bottom-right-section">
                    <h3>Other Photos</h3>
                    <div class="other-photos">
                        ${data.otherPhoto.map(photo => `<img width="20%" src="/images/${photo.substring(photo.lastIndexOf('/') + 1)}" class="other-photo">`).join('')}
                    </div>
                </div>
                <div>
                    <textarea style="width: 500px" id="comment" placeholder="Enter your comment here">${data.comment ? data.comment : ''}</textarea>
                    <div class="button-container">
                        <button id="rejectButton" onclick="rejectAccommodation(${data.id})">Reject</button>
                        <button id="acceptButton" onclick="acceptAccommodation(${data.id})">Accept</button>
                    </div>
                </div>
            </section>
            </div>
        </div>
    `;
    }

    function closeModal() {
        document.getElementById('editAccommodationModal').style.display = 'none';
    }

    function rejectAccommodation(id) {
        const rejectButton = document.getElementById('rejectButton');
        const acceptButton = document.getElementById('acceptButton');
        rejectButton.disabled = true;
        acceptButton.disabled = true;

        const comment = document.getElementById('comment').value;
        const requestData = { id: id, comment: comment };

        fetch('/accommodations/reject-accommodation', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(requestData)
        })
            .then(response => {
                if (response.ok) {
                    // Handle successful rejection
                    console.log('Accommodation rejected successfully');
                    closeModal();
                } else {
                    throw new Error('Failed to reject accommodation');
                }
            })
            .catch(error => {
                console.error('Error rejecting accommodation:', error);
            });
    }

    function acceptAccommodation(id) {
        const rejectButton = document.getElementById('rejectButton');
        const acceptButton = document.getElementById('acceptButton');
        rejectButton.disabled = true;
        acceptButton.disabled = true;

        fetch(`/accommodations/accept-accommodation?id=${id}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                if (response.ok) {
                    // Handle successful acceptance
                    console.log('Accommodation accepted successfully');
                    closeModal();
                } else {
                    throw new Error('Failed to accept accommodation');
                }
            })
            .catch(error => {
                console.error('Error accepting accommodation:', error);
            });
    }

</script>
<script>
    function displayImage() {
        const fileInput = document.getElementById('file');
        const imageContainer = document.getElementById('image-container');
        const userImage = document.getElementById('userimage');
        const defaultImage = document.getElementById('default-image');

        const file = fileInput.files[0];

        if (file) {
            const reader = new FileReader();

            reader.onload = function (e) {
                const img = document.createElement('img');
                img.src = e.target.result;

                imageContainer.innerHTML = '';
                imageContainer.appendChild(img);

                userImage.src = e.target.result;
            };

            reader.readAsDataURL(file);
        } else {
            imageContainer.innerHTML = '';
            userImage.src = ''; // Если файл не выбран, можно установить изображение по умолчанию или оставить src пустым.
            defaultImage.style.display = 'block'; // Показать изображение по умолчанию
        }
    }

    function changePage() {
        document.getElementById('adminpage').style.display = 'block';
        document.getElementById('main2').style.display = 'none';
        document.getElementById('main3').style.display = 'none';
        document.getElementById('main4').style.display = 'none';
        document.getElementById('bookings').style.display = 'none';


    }

    function closeModal1() {
        document.getElementById('main2').style.display = 'grid';
        document.getElementById('main3').style.display = 'none';
        document.getElementById('main4').style.display = 'none';
        document.getElementById('main5').style.display = 'none';
    }

    function closeModal2() {
        document.getElementById('main3').style.display = 'grid';
        document.getElementById('main2').style.display = 'none';
        document.getElementById('main4').style.display = 'none';
        document.getElementById('main5').style.display = 'none';
    }

    function closeModal3() {
        document.getElementById('main4').style.display = 'grid';
        document.getElementById('main3').style.display = 'none';
        document.getElementById('main2').style.display = 'none';
        document.getElementById('main5').style.display = 'none';
    }

    function closeModal4() {
        document.getElementById('main5').style.display = 'grid';
        document.getElementById('main2').style.display = 'none';
        document.getElementById('main3').style.display = 'none';
        document.getElementById('main4').style.display = 'none';
    }

    function closePage() {
        document.getElementById('adminpage').style.display = 'none';
        document.getElementById('main2').style.display = 'grid';


    }

    function changePanel() {
        document.getElementById('container').style.display = 'block';
        document.getElementById('container2').style.display = 'none';
    }

    function changePanel2() {
        document.getElementById('container').style.display = 'none';
        document.getElementById('container2').style.display = 'block';
    }

    document.addEventListener('DOMContentLoaded', function () {
        fetchUsers();

        function fetchUsers() {
            fetch('/users')
                .then(response => response.json())
                .then(users => {
                    const tbody = document.querySelector('table tbody');
                    tbody.innerHTML = ''; // Очищаем текущие строки таблицы
                    users.forEach(user => {
                        const row = `<tr>
                        <td>${user.id}</td>
                        <td>${user.fullName}</td>
                        <td>${user.email}</td>
                        <td>${user.blocked ? 'Yes' : 'No'}</td>
                        <td>
                            <button onclick="deleteUser(${user.id})" class="btn btn-danger">Delete</button>
                            <button onclick="blockUser(${user.id})" class="btn btn-warning">Block</button>
                        </td>
                     </tr>`;
                        tbody.innerHTML += row;
                    });
                    console.log(users);
                    console.log(users[0].creditCardDetails);
                    const userId = document.querySelector('input[name="currentUserId"]').value;
                    if (users[0].id == userId) {
                        document.querySelector('input[name="fullName"]').value = users[0].creditCardDetails.fullName;
                        document.querySelector('input[name="cardNumber"]').value = users[0].creditCardDetails.cardNumber;
                        document.querySelector('input[name="cvv"]').value = users[0].creditCardDetails.cvv;
                        document.querySelector('input[name="expirationDate"]').value = users[0].creditCardDetails.expirationDate;
                    }
                });
        }

// Делаем функцию deleteUser глобально доступной, чтобы вызывать из HTML
        window.deleteUser = function (id) {
            fetch('/users/' + id, {
                method: 'DELETE'
            })
                .then(() => fetchUsers()) // Перезагрузка списка пользователей после удаления
                .catch(error => console.error('Error:', error));
        };

        window.blockUser = function (id) {
            fetch('/users/' + id + '/block', {
                method: 'PATCH',
                // Убедитесь, что добавили необходимые заголовки, если ваш API их требует
            })
                .then(response => {
                    if (response.ok) {
                        fetchUsers(); // Перезагрузка списка пользователей после блокировки
                    } else {
                        alert('Failed to block user');
                    }
                })
                .catch(error => console.error('Error:', error));
        };

    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const userId = document.querySelector('input[name="currentUserId"]').value;
        document.getElementById('submitCreditCard').addEventListener('click', function () {
            // Сбор данных из формы
            const fullName = document.querySelector('#content3 input[name="fullName"]').value;
            const cardNumber = document.querySelector('#content3 input[name="cardNumber"]').value;
            const cvv = document.querySelector('#content3 input[name="cvv"]').value;
            const expirationDate = document.querySelector('#content3 input[name="expirationDate"]').value;
            console.log("fullName: " + fullName)
            // Подставьте правильный ID пользователя
            // о значение должно быть получено из вашего серверного кода
            // <!-- Пример использования data-* атрибута для хранения userId -->

            console.log("userid: " + userId)
            // Формирование объекта данных для отправки
            const creditCardDetails = {
                fullName: fullName,
                cardNumber: cardNumber,
                cvv: cvv,
                expirationDate: expirationDate,
                userId: userId
            };

            // AJAX запрос с помощью Fetch API
            fetch('http://localhost:1080/credit-card-details', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    // Возможно потребуется добавить дополнительные заголовки, например для CSRF защиты
                },
                body: JSON.stringify(creditCardDetails)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log(data);
                    alert('Credit card details submitted successfully.');
                })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                });
        });
    });

</script>
<script>
    function fetchAccommodations() {
        fetch('http://localhost:1080/accommodations')
            .then(response => response.json())
            .then(accommodations => {
                const tbody = document.querySelector('#accomodationTableBody');
                tbody.innerHTML = ''; // Clear current table rows

                accommodations.forEach(accommodation => {
                    const row = `<tr>
                        <td>${accommodation.id}</td>
                        <td>${accommodation.name}</td>
                        <td>${accommodation.location}</td>
                        <td>${accommodation.city.name}</td> <!-- City name needs to be dynamically resolved -->
                        <td>${accommodation.user.fullName}</td>
                        <td>${accommodation.status ? 'Active' : 'Inactive'}</td>
                        <td>
                            <!-- Example actions -->
                            <button onclick="editAccommodation(${accommodation.id})" class="btn btn-primary">Edit</button>
                            <button onclick="deleteAccommodation(${accommodation.id})" class="btn btn-danger">Delete</button>
                        </td>
                     </tr>`;
                    tbody.innerHTML += row;
                });
            })
            .catch(error => {
                console.error('Error fetching accommodations:', error);
            });
    }

    document.addEventListener('DOMContentLoaded', function () {
        fetchAccommodations();
    });

    function deleteAccommodation(accommodationId) {
        fetch(`/accommodations/${accommodationId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            },
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to delete accommodation');
                }
                // Handle success response
                console.log('Accommodation deleted successfully');
                fetchAccommodations();
            })
            .catch(error => {
                // Handle error
                console.error('Error deleting accommodation:', error);
            });
    }
</script>
<script>
    function changeBook1(){
        document.getElementById('bookingss').style.display="block";
        document.getElementById('announcements').style.display="none";
    }
    function changeBook2(){
        document.getElementById('bookingss').style.display="none";
        document.getElementById('announcements').style.display="block";
    }
    function closeBooking() {
        document.getElementById('bookings').style.display='none';
        document.getElementById('main2').style.display='block';


    }
    function changePage2() {
        document.getElementById('bookings').style.display='block';
        document.getElementById('adminpage').style.display='none';
        document.getElementById('main2').style.display='none';
        document.getElementById('main3').style.display='none';
        document.getElementById('main4').style.display='none';


    }
    function changePage3() {
        document.getElementById('bookings').style.display = 'none';
        document.getElementById('adminpage').style.display = 'none';
        document.getElementById('channels').style.display = 'block';
        document.getElementById('main2').style.display = 'none';
        document.getElementById('main3').style.display = 'none';
        document.getElementById('main4').style.display = 'none';
    }
</script>
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        const userId = document.querySelector('input[name="currentUserId"]').value;
        document.getElementById('addAccommodation').addEventListener('click', function () {
            console.log("lwnalkdnwal")

            const categoryInput = document.querySelector('#content12 select[name="category"]');
            const descriptionInput = document.querySelector('#content12 textarea[name="description"]');
            const endTimeInput = document.querySelector('#content12 input[name="endTime"]');
            const locationInput = document.querySelector('#content12 input[name="location"]');
            const nameInput = document.querySelector('#content12 input[name="placeName"]');
            const startTimeInput = document.querySelector('#content12 input[name="startTime"]');
            const priceInput = document.querySelector('#content12 input[name="price"]');
            const cityInput = document.querySelector('#content12 select[name="city"]');
            const filesInput = document.querySelector('#content12 input[name="photos"]');

            const category = categoryInput.value;
            const description = descriptionInput.value;
            const endTime = endTimeInput.value;
            const location = locationInput.value;
            const name = nameInput.value;
            const startTime = startTimeInput.value;
            const price = priceInput.value;
            const city = cityInput.value;
            const files = filesInput.files;

            const accommodationDetails = {
                categoryId: category,
                description: description,
                endTime: endTime,
                location: location,
                name: name,
                startTime: startTime,
                price: price,
                cityId: city,
                userId: userId,
                status: false,
            };
            fetch('http://localhost:1080/accommodations', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(accommodationDetails)
            })
                .then(response => {
                    return response.json();
                }).then(data => {
                console.log(data.id);
                sendSecondRequest(data.id);
                categoryInput.value = '';
                descriptionInput.value = '';
                endTimeInput.value = '';
                locationInput.value = '';
                nameInput.value = '';
                startTimeInput.value = '';
                priceInput.value = '';
                cityInput.value = '';
                filesInput.value = '';
            })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                });

            function sendSecondRequest(id) {
                const formData = new FormData();
                formData.append('id', id);
                for (let i = 0; i < files.length; i++) {
                    formData.append('photos', files[i]);
                }

                fetch('http://localhost:1080/accommodations/uploadFiles', {
                    method: 'POST',
                    body: formData
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log('Success:', data);
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            }
        });
    });
</script>
<script>
    const userId = document.querySelector('input[name="currentUserId"]').value;
    $.ajax({
        url: 'http://localhost:1080/users/' + userId + '/credit-card-details',
        type: 'GET',
        dataType: 'json',
        success: function(response) {
            $('input[name="fullName"]').val(response.fullName);
            $('input[name="cardNumber"]').val(response.cardNumber);
            $('input[name="cvv"]').val(response.cvv);
            $('input[name="expirationDate"]').val(response.expirationDate);
        },
        error: function(xhr, status, error) {
            console.error('Error:', error);
        }
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const userId = document.querySelector('input[name="currentUserId"]').value; // Retrieve user ID

        fetch(`http://localhost:1080/accommodations/findByUserId/${userId}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json(); // Parse JSON data from the response
            })
            .then(data => {
                const container = document.getElementById('bookingCardsContainer');
                data.forEach(item => {
                    // Create the entire booking card dynamically
                    const card = document.createElement('div');
                    card.className = 'booking-card';
                    card.innerHTML = `
                    <div>
                        <img src="${item.mainPhoto}" alt="Image of ${item.name}" style="width: 100px; height: 100px;">
                    </div>
                    <div class="booking-card-info">
                        <h1>${item.name}</h1>
                        <p>${item.description}</p>
                        <h2>${item.price} KZT</h2>
                        <a href="/myAccommodationsDetailsShow/${item.id}">DETAILS</a> <!-- Link to detailed view -->
                    </div>
                `;
                    container.appendChild(card); // Append each new card to the container
                });
            })
            .catch(error => {
                console.error('Failed to fetch data:', error);
                alert('Failed to load announcements.');
            });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const userId = document.querySelector('input[name="currentUserId"]').value;

        // Fetch bookings by userId
        fetch(`http://localhost:1080/bookings/findByUserId/${userId}`)
            .then(response => response.json())
            .then(bookings => {
                bookings.forEach(booking => {
                    // For each booking, fetch accommodation details
                    fetch(`http://localhost:1080/accommodations/getByIdAccomodationApi/${booking.accommodationId}`)
                        .then(response => response.json())
                        .then(accommodation => {
                            // Create and append booking card with accommodation details
                            const container = document.getElementById('bookingCardsContainerQ');
                            const card = document.createElement('div');
                            card.className = 'booking-card';
                            card.innerHTML = `
                            <div>
                                <img src="${accommodation.mainPhoto}" alt="Image of ${accommodation.name}" style="width: 100px; height: 100px;">
                            </div>
                            <div class="booking-card-info">
                                <h1>${accommodation.name}</h1>
                                <p>${accommodation.description}</p>
                                <h2>$${accommodation.price}</h2>
                            </div>
                        `;
                            container.appendChild(card);
                        })
                        .catch(error => {
                            console.error('Failed to fetch accommodation details:', error);
                        });
                });
            })
            .catch(error => {
                console.error('Failed to fetch bookings:', error);
            });
    });
</script>
<script>
    function fetchGroupChats() {
        const userId = document.querySelector('input[name="currentUserId"]').value;
        fetch('/channel/' + userId) // Replace {userId} with the actual user ID
            .then(response => response.json())
            .then(chats => {
                const tableBody = document.getElementById('channelsTableBody');
                tableBody.innerHTML = ''; // Clear existing rows

                chats.forEach(chat => {
                    const row = document.createElement('tr');
                    row.dataset.channelId = chat.id; // Assuming chat object has an 'id' property
                    const nameCell = document.createElement('td');
                    nameCell.textContent = chat.name; // Assuming chat object has a 'name' property
                    row.appendChild(nameCell);
                    // Append more cells if needed for additional chat details

                    tableBody.appendChild(row);
                });
            })
            .catch(error => {
                console.error('Error fetching group chats:', error);
            });
    }

    // Call fetchGroupChats when the page loads or when you want to refresh the table
    fetchGroupChats();

    function handleRowClick(event) {
        if (event.target.tagName === 'TD') {
            console.log("Event: " + event.target.closest('tr').id)
            const channelId = event.target.closest('tr').dataset.channelId;
            window.location.href = `/channelMessages/${channelId}`;

            // Send a request using fetch or any other method
            // fetch(`/channelMessages/${channelId}`)
            //     .then(response => response.text())
            //     .then(html => {
            //         document.documentElement.innerHTML = html;
            //
            //     })
            //     .catch(error => {
            //         console.error('Error fetching messages:', error);
            //     });
            // Example: fetch('/api/chat/{chatId}') or any other request
        }
    }

    // Attach click event listener to the table
    const channelsTable = document.getElementById('channelsTable');
    channelsTable.addEventListener('click', handleRowClick);

    function goBack() {
        console.log("GOOOOOaaaaaa")
    }
</script>
<script>
    function closeChannel() {
        document.getElementById('channels').style.display = 'none';
        document.getElementById('main2').style.display = 'block';
    }
</script>
</body>
</html>